import asyncio


class TaskPlanner:
    def __init__(self, process_analysis, process_connection, time_to_sleep=15):
        self.time_to_sleep = time_to_sleep
        self.pa = process_analysis
        self.pc = process_connection

    def run(self):
        loop = asyncio.get_event_loop()
        loop.create_task(self.__check_connection())
        loop.create_task(self.__check_process())
        loop.run_forever()

    async def __check_connection(self):
        while True:
            print('[start check new connection]')
            self.pc.check_new_connection()
            print('[finish check new connection]')
            await asyncio.sleep(self.time_to_sleep)

    async def __check_process(self):
        while True:
            print('[check new process]')
            self.pa.check_new_process()
            print('[finish check process]')
            await asyncio.sleep(self.time_to_sleep)

